<div class="main_page">

  <div class="submission">
      <div class="LI-row">
        <label class="create_poll_question" for="question">Question:</label>
        <input type="text" id="question" name="question" [(ngModel)]="questionField">
      </div>

      <ul>
        @for (op of optionsFields; track i; let i = $index) {
            <div class="LI-row">
              <label for="option">Option {{i+1}}:</label>
              <input type="text" id="option" name="option" [(ngModel)]="optionsFields[i]">
            </div>
        }

        <div class="button-row">
          <button (click)="addOptionField()">Add Option</button>
          <button (click)="removeOptionField()">Remove last Option</button>
          <button (click)="createNewPoll()">Create Poll</button>
        </div>
      </ul>

      @if (errorMessage) {
      <p style="color: red;">{{ errorMessage }}</p>
    }
  </div>
  
  <div class="poll-list" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScrollDown()">
    <app-poll 
      *ngFor="let poll of allPolls" 
      [poll]="poll">
    </app-poll>
  </div>
</div>