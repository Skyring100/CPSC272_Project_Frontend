<div class="main_page">
  <button (click)="togglePollCreation()" class="create-button">Create Your Own Poll</button>
  <div class="submission">
    @if (isCreatingPoll){
      <div>
        <label class="create_poll_question" for="question">Question:</label>
        <input type="text" id="question" name="question" [(ngModel)]="questionField">
        <ul>
          @for (op of optionsFields; track i; let i = $index) {
            <li class="entry-fields">
              <label for="option">Option {{i+1}}:</label>
              <input type="text" id="option" name="option" [(ngModel)]="optionsFields[i]">
            </li>
            <br>
          }
          <button (click)="addOptionField()">Add Option</button>
        </ul>
        <button (click)="createNewPoll()">Create Poll</button>
      </div>

      <button (click)="createDummyData()">Create Dummy Data</button>
    }
  </div>
  <!--Show all polls in the database-->
  <!--For every poll in in the loaded results, repeat this div element-->
  <div *ngFor="let poll of allPolls" class="poll_element">
    <p class="poll_question">{{ poll.question }}</p>
    <!--For every option inside this poll, repeat this list element-->
    <ul *ngFor="let option of poll.options" >
      <li class="poll_option" [class.user-voted]="poll.user_vote === option.option_id">
        <button (click)="voteOnPoll(poll, option)" class="vote-box">
          {{option.content}} - {{option.vote_count}}
        </button>
      </li>
    </ul>
  </div>
</div>